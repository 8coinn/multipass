What is multipass?
--------------------

Multipassd is a daemon that orchestrates the creation, management and
maintenance of virtual machine and associated ubuntu images to simplify
development on various platforms such as OSX and Windows 10

Dependencies
---------------------------------------
gRPC has to be built from source, pull all the required source submodules with:

    git submodule update --init --recursive
    mk-build-deps -s sudo -i

Building
---------------------------------------

Build and install gRPC first

    cd <multipass_root>/3rd-party/grpc
    make
    make install

Then multipass

    cd <multipass_root>
    mkdir build-multipass
    cd build-multipass
    cmake ../
    make

Manually setting up an image for launching
------------------------------------------

    mkdir ~/qemu
    cd ~/qemu

    wget http://cloud-images.ubuntu.com/xenial/current/xenial-server-cloudimg-amd64-disk1.img
    cp xenial-server-cloudimg-amd64-disk1.img disk.img

    cat > cloudinit-config <<EOF
    #cloud-config
    ssh_authorized_keys:
      - <your public key>
    manage_etc_hosts: true
    EOF

    cloud-localds cloudinit-seed.img cloudinit-config

Running daemon and client
---------------------------------------

   <multipass_root>/build-multipass/bin/multipassd

   <multipass_root>/build-multipass/bin/ubuntu launch (should pop up a qemu instance)

SSH into running VM
--------------------------------------

    ssh -p 2222 ubuntu@localhost

Running the Electron app
---------------------------------------

    cd <multipass_root>/electron-app
    npm install
    npm start


Building a snap of the Electron app
---------------------------------------

    cd <multipass_root>/electron-app
    npm install
    npm run dist

The snap will end up in <multi-ass_root>/electron-app/dist/
